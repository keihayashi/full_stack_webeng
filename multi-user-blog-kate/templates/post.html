<div class="post">
  <div class="post-heading">
    <div class="post-title">
      {{p.subject}}
    </div>

    <div class="post-date">
      {{p.created.strftime("%b %d, %Y") + "/ created by " + p.author.name + "/ liked by " + ("%d" % p.liked_num)}}
    </div>
  </div>

  <div class="post-content">
    {{p.content|replace('\n','<br>'|safe)}}
  </div>

  <br>
  <a class="login-link" href="/blog/{{p.key().id()}}">Link</a>
  <br>
  {% if p.author.name == user.name %}
    <a class="login-link" href="/edit/{{p.key().id()}}">Edit</a>
    <form method="post" action="/delete">
      <input type="hidden" name="post_id" value="{{p.key().id()}}">
      <input type="submit" class="submit-button" value="Delete">
    </form>
  {% else %}
    <form method="post" action="/like">
      <input type="hidden" name="post_id" value="{{p.key().id()}}">
      <input type="submit" class="submit-button" value="Like">
    </form>
    <form method="post" action="/comment">
      <input type="hidden" name="post_id" value="{{p.key().id()}}">
      <input type="text" name="comment_content">
      <input type="submit" class="submit-button" value="Comment">
    </form>
  {% endif %}

  {% for c in comment %}
    {% if c.post.key().id() == p.key().id() %}
      <div class="post-content">
        {{c.content | safe}}
      </div>
      {{c.created.strftime("%b %d, %Y") + " commented by " + c.person.name}}
      <br>
    {% endif %}
  {% endfor %}
  <br><br>
</div>
